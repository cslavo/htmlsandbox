<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hiragana a Katakana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .dark-mode {
            background-color: #1a202c;
            color: #f7fafc;
        }
        .dark-mode button {
            background-color: #2d3748;
            color: #f7fafc;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-gray-800 {
            color: #f7fafc;
        }
        .dark-mode .text-gray-700 {
            color: #e2e8f0;
        }
        .dark-mode .bg-gray-200 {
            background-color: #4a5568;
        }
        .dark-mode input[type="checkbox"] {
            accent-color: #f7fafc;
        }
        .toggle-switch {
            cursor: pointer;
        }
        .max-w-4xl {
            max-width: 56rem;
        }
        @media (max-width: 768px) {
            .max-w-4xl {
                max-width: 100%;
                margin: 0 1rem;
            }
        }
        #charactersDisplay {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(3rem, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .character-container {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem;
        }
        .character {
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 0.25rem;
        }
        .numbers-container {
            display: flex;
            flex-direction: column;
            font-size: 0.7rem;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen" id="body">
    <div class="bg-white shadow-md rounded p-6 w-full max-w-4xl mx-auto">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold">Hiragana a Katakana</h1>
            <div class="flex items-center space-x-2">
                <button id="toggleDarkMode" class="toggle-switch text-gray-700">
                    üåô
                </button>
            </div>
        </div>
        <div id="settings" class="mb-4">
            <label class="block text-gray-700 font-semibold mb-2">Vyberte sady znakov:</label>
            <div class="flex items-center mb-2">
                <input type="checkbox" id="hiraganaCheckbox" class="mr-2" checked>
                <label for="hiraganaCheckbox">Hiragana</label>
            </div>
            <div class="flex items-center mb-2">
                <input type="checkbox" id="hiraganaDakuonCheckbox" class="mr-2">
                <label for="hiraganaDakuonCheckbox">Hiragana Dakuon</label>
            </div>
            <div class="flex items-center mb-2">
                <input type="checkbox" id="katakanaCheckbox" class="mr-2" checked>
                <label for="katakanaCheckbox">Katakana</label>
            </div>
            <div class="flex items-center mb-2">
                <input type="checkbox" id="katakanaDakuonCheckbox" class="mr-2">
                <label for="katakanaDakuonCheckbox">Katakana Dakuon</label>
            </div>
            <div class="flex space-x-2">
                <button id="startButton" class="bg-blue-500 text-white px-4 py-2 rounded w-full">Zaƒça≈• uƒçenie</button>
                <button id="infoButton" class="bg-gray-200 text-gray-800 px-4 py-2 rounded w-full">Inform√°cie</button>
            </div>
        </div>
        <div id="infoSection" class="hidden mb-4">
            <h2 class="text-xl font-semibold mb-2">Inform√°cie</h2>
            <p class="text-gray-700 mb-2">
                T√°to aplik√°cia v√°m pom√¥≈æe nauƒçi≈• sa japonsk√© znaky Hiragany a Katakany, vr√°tane ich Dakuon variantov. M√¥≈æete si vybra≈•, ktor√© sady znakov chcete tr√©nova≈•.
            </p>
            <p class="text-gray-700 mb-2">
                <strong>Hodnotenie zn√°mych znakov:</strong> Znak sa pova≈æuje za "zn√°my", ak m√°te √∫spe≈°nos≈• aspo≈à 75% a odpovedali ste na≈à aspo≈à 4-kr√°t. V procese uƒçenia sa v√°m bude zobrazova≈• percento zn√°mych znakov z celkov√©ho poƒçtu akt√≠vnych znakov.
            </p>
            <p class="text-gray-700 mb-2">
                <strong>Vyl√∫ƒçenie znakov:</strong> Kliknut√≠m na znak v prehƒæade na spodnej ƒçasti obrazovky ho m√¥≈æete vyl√∫ƒçi≈• z uƒçenia alebo znova zaradi≈•. Vyl√∫ƒçen√© znaky sa nezapoƒç√≠tavaj√∫ do ≈°tatistiky "Pozn√°te..." a nebud√∫ sa zobrazova≈• poƒças uƒçenia. Vyl√∫ƒçen√© znaky s√∫ vizu√°lne oznaƒçen√© preƒçiarknut√≠m.
            </p>
            <button id="backToSettings" class="bg-blue-500 text-white px-4 py-2 rounded w-full mt-2">Sp√§≈•</button>
        </div>
        <div id="learningSection" class="hidden">
            <div id="progressBar" class="mb-4">
                <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                    <div id="progressFill" class="bg-blue-500 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
                <div class="text-sm text-gray-700 mt-1 text-right" id="progressText">0% spr√°vne</div>
                <div class="text-sm text-gray-700 mt-1 text-left" id="knownCharacters">Pozn√°te 0% znakov.</div>
            </div>
            <div id="characterDisplay" class="text-6xl text-center mb-6 cursor-default"></div>
            <div id="options" class="grid grid-cols-2 gap-4 mb-6">
                <!-- Tu sa dynamicky vlo≈æia mo≈ænosti -->
            </div>
            <div id="result" class="text-center text-xl font-semibold mb-4"></div>
            <div class="flex justify-between items-center mb-4">
                <button id="nextButton" class="bg-blue-500 text-white px-4 py-2 rounded">ƒéal≈°√≠ znak</button>
                <button id="backToSettingsFromLearning" class="bg-gray-200 text-gray-800 px-4 py-2 rounded">Sp√§≈• na √∫vodn√∫ str√°nku</button>
            </div>
            <div id="charactersDisplay" class="grid grid-cols-8 gap-2">
                <!-- Tu sa dynamicky zobrazia v≈°etky znaky -->
            </div>
        </div>
    </div>

    <script>
const hiraganaData = [
    { character: '„ÅÇ', romaji: 'a', mnemonic: 'Vyzer√° ako otvoren√© √∫sta vyd√°vaj√∫ce zvuk "√°√°".' },
    { character: '„ÅÑ', romaji: 'i', mnemonic: 'Dva tenk√© stƒ∫py pripom√≠naj√∫ p√≠smeno "I".' },
    { character: '„ÅÜ', romaji: 'u', mnemonic: 'Pripom√≠na strechu domu, kde "√∫toƒç√≠" d√°≈æƒè.' },
    { character: '„Åà', romaji: 'e', mnemonic: 'Vyzer√° ako ƒçlovek rozpa≈æuj√∫ci ruky hovoriac "e≈°te".' },
    { character: '„Åä', romaji: 'o', mnemonic: 'Pripom√≠na kruh alebo "oko".' },
    { character: '„Åã', romaji: 'ka', mnemonic: 'Vyzer√° ako ƒçlovek s "kapuc≈àou" na hlave.' },
    { character: '„Åç', romaji: 'ki', mnemonic: 'Pripom√≠na "kƒæ√∫ƒç" s dvoma zubami.' },
    { character: '„Åè', romaji: 'ku', mnemonic: 'Vyzer√° ako "k√∫t" miestnosti.' },
    { character: '„Åë', romaji: 'ke', mnemonic: 'Pripom√≠na p√≠smeno "K" nap√≠san√© r√Ωchlo.' },
    { character: '„Åì', romaji: 'ko', mnemonic: 'Dve l√≠nie ako "kopije" skr√≠≈æen√© spolu.' },
    { character: '„Åï', romaji: 'sa', mnemonic: 'Vyzer√° ako "samuraj" s meƒçom.' },
    { character: '„Åó', romaji: 'shi', mnemonic: 'Pripom√≠na "≈°i≈°ku" padaj√∫cu z stromu.' },
    { character: '„Åô', romaji: 'su', mnemonic: 'Tvar sluƒçky ako "su≈°i" zvinut√© do rolky.' },
    { character: '„Åõ', romaji: 'se', mnemonic: 'Vyzer√° ako "sejba" semien na poli.' },
    { character: '„Åù', romaji: 'so', mnemonic: 'Pripom√≠na "sokola" letiaceho v obl√∫ku.' },
    { character: '„Åü', romaji: 'ta', mnemonic: 'Vyzer√° ako "tanier" s jedlom.' },
    { character: '„Å°', romaji: 'chi', mnemonic: 'Pripom√≠na "ƒçinky" pou≈æ√≠van√© pri cviƒçen√≠.' },
    { character: '„Å§', romaji: 'tsu', mnemonic: 'Vyzer√° ako "cunami" vlna bl√≠≈æiaca sa k brehu.' },
    { character: '„Å¶', romaji: 'te', mnemonic: 'Pripom√≠na ruku ukazuj√∫cu "t√Ωm" smerom.' },
    { character: '„Å®', romaji: 'to', mnemonic: 'Vyzer√° ako "top√°nka" so ≈°n√∫rkou.' },
    { character: '„Å™', romaji: 'na', mnemonic: 'Pripom√≠na "n√°ƒçinie" zavesen√© na stene.' },
    { character: '„Å´', romaji: 'ni', mnemonic: 'Dve l√≠nie ako "nity" dr≈æia nieƒço pohromade.' },
    { character: '„Å¨', romaji: 'nu', mnemonic: 'Vyzer√° ako "nudle" zamotan√© spolu.' },
    { character: '„Å≠', romaji: 'ne', mnemonic: 'Pripom√≠na "necht" s lakom.' },
    { character: '„ÅÆ', romaji: 'no', mnemonic: 'Vyzer√° ako "nos" v profile.' },
    { character: '„ÅØ', romaji: 'ha', mnemonic: 'Pripom√≠na "h√°ƒçik" na ryby.' },
    { character: '„Å≤', romaji: 'hi', mnemonic: 'Vyzer√° ako "horiaca" svieƒçka.' },
    { character: '„Åµ', romaji: 'fu', mnemonic: 'Pripom√≠na "f√∫zy" na tv√°ri.' },
    { character: '„Å∏', romaji: 'he', mnemonic: 'Vyzer√° ako ≈°√≠pka smeruj√∫ca "hen", teda tam.' },
    { character: '„Åª', romaji: 'ho', mnemonic: 'Pripom√≠na "holubicu" letiacu na oblohe.' },
    { character: '„Åæ', romaji: 'ma', mnemonic: 'Vyzer√° ako "mamuta" s dlh√Ωmi klami.' },
    { character: '„Åø', romaji: 'mi', mnemonic: 'Pripom√≠na "mlyn" s ot√°ƒçaj√∫cimi sa lopatkami.' },
    { character: '„ÇÄ', romaji: 'mu', mnemonic: 'Vyzer√° ako "muchotr√°vka" s klob√∫kom.' },
    { character: '„ÇÅ', romaji: 'me', mnemonic: 'Pripom√≠na "meƒç" zasunut√Ω v po≈°ve.' },
    { character: '„ÇÇ', romaji: 'mo', mnemonic: 'Vyzer√° ako "most" ponad rieku.' },
    { character: '„ÇÑ', romaji: 'ya', mnemonic: 'Pripom√≠na "jatagan" - zahnut√Ω meƒç.' },
    { character: '„ÇÜ', romaji: 'yu', mnemonic: 'Vyzer√° ako "jurta" postaven√° v stepi.' },
    { character: '„Çà', romaji: 'yo', mnemonic: 'Pripom√≠na "jojo" visiace na ≈°n√∫rke.' },
    { character: '„Çâ', romaji: 'ra', mnemonic: 'Vyzer√° ako "raketa" st√∫paj√∫ca k oblohe.' },
    { character: '„Çä', romaji: 'ri', mnemonic: 'Dve ƒçiary ako "rieky" teƒç√∫ce vedƒæa seba.' },
    { character: '„Çã', romaji: 'ru', mnemonic: 'Pripom√≠na "r√∫ƒçku" na ≈°√°lke.' },
    { character: '„Çå', romaji: 're', mnemonic: 'Vyzer√° ako "re≈•az" visiaca dolu.' },
    { character: '„Çç', romaji: 'ro', mnemonic: 'Pripom√≠na "robotn√≠ka" nes√∫ceho n√°radie.' },
    { character: '„Çè', romaji: 'wa', mnemonic: 'Vyzer√° ako "v√°ha" s miskami.' },
    { character: '„Çí', romaji: 'wo', mnemonic: 'Pripom√≠na "volant" auta.' },
    { character: '„Çì', romaji: 'n', mnemonic: 'Vyzer√° ako posledn√© p√≠smeno "n" v abecede.' },
];

const hiraganaDakuonData = [
    { character: '„Åå', romaji: 'ga', mnemonic: 'Ako "„Åã" (ka), ale s dvoma bodkami - "GA" ako gar√°≈æ.' },
    { character: '„Åé', romaji: 'gi', mnemonic: 'Ako "„Åç" (ki), ale s dvoma bodkami - "GI" ako gitara.' },
    { character: '„Åê', romaji: 'gu', mnemonic: 'Ako "„Åè" (ku), ale s dvoma bodkami - "GU" ako guƒæa.' },
    { character: '„Åí', romaji: 'ge', mnemonic: 'Ako "„Åë" (ke), ale s dvoma bodkami - "GE" ako gener√°tor.' },
    { character: '„Åî', romaji: 'go', mnemonic: 'Ako "„Åì" (ko), ale s dvoma bodkami - "GO" ako g√≥l.' },
    { character: '„Åñ', romaji: 'za', mnemonic: 'Ako "„Åï" (sa), ale s dvoma bodkami - "ZA" ako z√°mok.' },
    { character: '„Åò', romaji: 'ji', mnemonic: 'Ako "„Åó" (shi), ale s dvoma bodkami - "JI" ako jing a jang.' },
    { character: '„Åö', romaji: 'zu', mnemonic: 'Ako "„Åô" (su), ale s dvoma bodkami - "ZU" ako zub.' },
    { character: '„Åú', romaji: 'ze', mnemonic: 'Ako "„Åõ" (se), ale s dvoma bodkami - "ZE" ako zebra.' },
    { character: '„Åû', romaji: 'zo', mnemonic: 'Ako "„Åù" (so), ale s dvoma bodkami - "ZO" ako zoo.' },
    { character: '„Å†', romaji: 'da', mnemonic: 'Ako "„Åü" (ta), ale s dvoma bodkami - "DA" ako d√°≈ædnik.' },
    { character: '„Å¢', romaji: 'ji', mnemonic: 'Ako "„Å°" (chi), ale s dvoma bodkami - druh√Ω znak pre "JI" ako jing.' },
    { character: '„Å•', romaji: 'zu', mnemonic: 'Ako "„Å§" (tsu), ale s dvoma bodkami - druh√Ω znak pre "ZU" ako zubn√° kefka.' },
    { character: '„Åß', romaji: 'de', mnemonic: 'Ako "„Å¶" (te), ale s dvoma bodkami - "DE" ako detekt√≠v.' },
    { character: '„Å©', romaji: 'do', mnemonic: 'Ako "„Å®" (to), ale s dvoma bodkami - "DO" ako dom.' },
    { character: '„Å∞', romaji: 'ba', mnemonic: 'Ako "„ÅØ" (ha), ale s dvoma bodkami - "BA" ako bal√≥n.' },
    { character: '„Å≥', romaji: 'bi', mnemonic: 'Ako "„Å≤" (hi), ale s dvoma bodkami - "BI" ako bicykel.' },
    { character: '„Å∂', romaji: 'bu', mnemonic: 'Ako "„Åµ" (fu), ale s dvoma bodkami - "BU" ako bublina.' },
    { character: '„Åπ', romaji: 'be', mnemonic: 'Ako "„Å∏" (he), ale s dvoma bodkami - "BE" ako be≈æec.' },
    { character: '„Åº', romaji: 'bo', mnemonic: 'Ako "„Åª" (ho), ale s dvoma bodkami - "BO" ako box.' },
    { character: '„Å±', romaji: 'pa', mnemonic: 'Ako "„ÅØ" (ha), ale s kr√∫≈ækom - "PA" ako paprika.' },
    { character: '„Å¥', romaji: 'pi', mnemonic: 'Ako "„Å≤" (hi), ale s kr√∫≈ækom - "PI" ako pilot.' },
    { character: '„Å∑', romaji: 'pu', mnemonic: 'Ako "„Åµ" (fu), ale s kr√∫≈ækom - "PU" ako pusa.' },
    { character: '„Å∫', romaji: 'pe', mnemonic: 'Ako "„Å∏" (he), ale s kr√∫≈ækom - "PE" ako pero.' },
    { character: '„ÅΩ', romaji: 'po', mnemonic: 'Ako "„Åª" (ho), ale s kr√∫≈ækom - "PO" ako poh√°r.' },
];

const katakanaData = [
    { character: '„Ç¢', romaji: 'a', mnemonic: 'Vyzer√° ako ≈°ikm√© "A" bez prieƒçky.' },
    { character: '„Ç§', romaji: 'i', mnemonic: 'Pripom√≠na dva zvisl√© ≈•ahy - "I" ako ihla.' },
    { character: '„Ç¶', romaji: 'u', mnemonic: 'Vyzer√° ako √∫zky poh√°r - "U" ako √∫stie poh√°ra.' },
    { character: '„Ç®', romaji: 'e', mnemonic: 'Pripom√≠na znak eura - "E" ako euro.' },
    { character: '„Ç™', romaji: 'o', mnemonic: 'Vyzer√° ako otvoren√© √∫sta - "O" ako otvor.' },
    { character: '„Ç´', romaji: 'ka', mnemonic: 'Pripom√≠na k√°ru - "KA" ako k√°ra.' },
    { character: '„Ç≠', romaji: 'ki', mnemonic: 'Vyzer√° ako kƒæ√∫ƒç - "KI" ako kƒæ√∫ƒç.' },
    { character: '„ÇØ', romaji: 'ku', mnemonic: 'Pripom√≠na kuchynsk√Ω h√°k - "KU" ako kuchy≈àa.' },
    { character: '„Ç±', romaji: 'ke', mnemonic: 'Vyzer√° ako kefka - "KE" ako kefka.' },
    { character: '„Ç≥', romaji: 'ko', mnemonic: 'Pripom√≠na kocku z profilu - "KO" ako kocka.' },
    { character: '„Çµ', romaji: 'sa', mnemonic: 'Vyzer√° ako sand√°le - "SA" ako sand√°le.' },
    { character: '„Ç∑', romaji: 'shi', mnemonic: 'Pripom√≠na ≈°i≈°ku - "SHI" ako ≈°i≈°ka.' },
    { character: '„Çπ', romaji: 'su', mnemonic: 'Vyzer√° ako sluƒçka - "SU" ako sluƒçka.' },
    { character: '„Çª', romaji: 'se', mnemonic: 'Pripom√≠na sekeru - "SE" ako sekera.' },
    { character: '„ÇΩ', romaji: 'so', mnemonic: 'Vyzer√° ako soƒæniƒçka - "SO" ako soƒæ.' },
    { character: '„Çø', romaji: 'ta', mnemonic: 'Pripom√≠na tanier - "TA" ako tanier.' },
    { character: '„ÉÅ', romaji: 'chi', mnemonic: 'Vyzer√° ako ƒçiara s bodkou - "CHI" ako ƒçiara.' },
    { character: '„ÉÑ', romaji: 'tsu', mnemonic: 'Pripom√≠na tsunami vlny - "TSU" ako tsunami.' },
    { character: '„ÉÜ', romaji: 'te', mnemonic: 'Vyzer√° ako telef√≥n - "TE" ako telef√≥n.' },
    { character: '„Éà', romaji: 'to', mnemonic: 'Pripom√≠na top√°nku - "TO" ako top√°nka.' },
    { character: '„Éä', romaji: 'na', mnemonic: 'Vyzer√° ako n√°kupn√Ω voz√≠k z profilu - "NA" ako n√°kup.' },
    { character: '„Éã', romaji: 'ni', mnemonic: 'Pripom√≠na nite - "NI" ako nite.' },
    { character: '„Éå', romaji: 'nu', mnemonic: 'Vyzer√° ako n√¥≈æ - "NU" ako n√¥≈æ.' },
    { character: '„Éç', romaji: 'ne', mnemonic: 'Pripom√≠na ne√≥nov√Ω obl√∫k - "NE" ako ne√≥n.' },
    { character: '„Éé', romaji: 'no', mnemonic: 'Vyzer√° ako nos z profilu - "NO" ako nos.' },
    { character: '„Éè', romaji: 'ha', mnemonic: 'Pripom√≠na haciendu - "HA" ako hacienda.' },
    { character: '„Éí', romaji: 'hi', mnemonic: 'Vyzer√° ako hifi ve≈æa - "HI" ako hifi.' },
    { character: '„Éï', romaji: 'fu', mnemonic: 'Pripom√≠na futbalov√© ihrisko - "FU" ako futbal.' },
    { character: '„Éò', romaji: 'he', mnemonic: 'Vyzer√° ako helikopt√©ra zhora - "HE" ako helikopt√©ra.' },
    { character: '„Éõ', romaji: 'ho', mnemonic: 'Pripom√≠na hodiny - "HO" ako hodiny.' },
    { character: '„Éû', romaji: 'ma', mnemonic: 'Vyzer√° ako mapa - "MA" ako mapa.' },
    { character: '„Éü', romaji: 'mi', mnemonic: 'Pripom√≠na mikrof√≥n - "MI" ako mikrof√≥n.' },
    { character: '„É†', romaji: 'mu', mnemonic: 'Vyzer√° ako mu≈°ƒæa - "MU" ako mu≈°ƒæa.' },
    { character: '„É°', romaji: 'me', mnemonic: 'Pripom√≠na meƒç - "ME" ako meƒç.' },
    { character: '„É¢', romaji: 'mo', mnemonic: 'Vyzer√° ako most - "MO" ako most.' },
    { character: '„É§', romaji: 'ya', mnemonic: 'Pripom√≠na yak - "YA" ako yak.' },
    { character: '„É¶', romaji: 'yu', mnemonic: 'Vyzer√° ako yucca - "YU" ako yucca.' },
    { character: '„É®', romaji: 'yo', mnemonic: 'Pripom√≠na yoyo - "YO" ako yoyo.' },
    { character: '„É©', romaji: 'ra', mnemonic: 'Vyzer√° ako r√°dio - "RA" ako r√°dio.' },
    { character: '„É™', romaji: 'ri', mnemonic: 'Pripom√≠na rieku - "RI" ako rieka.' },
    { character: '„É´', romaji: 'ru', mnemonic: 'Vyzer√° ako ruleta - "RU" ako ruleta.' },
    { character: '„É¨', romaji: 're', mnemonic: 'Pripom√≠na rebr√≠k - "RE" ako rebr√≠k.' },
    { character: '„É≠', romaji: 'ro', mnemonic: 'Vyzer√° ako robot - "RO" ako robot.' },
    { character: '„ÉØ', romaji: 'wa', mnemonic: 'Pripom√≠na wafle - "WA" ako wafle.' },
    { character: '„É≤', romaji: 'wo', mnemonic: 'Vyzer√° ako whisky fƒæa≈°a - "WO" ako whisky.' },
    { character: '„É≥', romaji: 'n', mnemonic: 'Pripom√≠na vlnu - "N" ako vlna.' },
];

const katakanaDakuonData = [  
    { character: '„Ç¨', romaji: 'ga', mnemonic: 'Ako "„Ç´" (ka), ale s dvoma bodkami - "GA" ako gar√°≈æ.' },  
    { character: '„ÇÆ', romaji: 'gi', mnemonic: 'Ako "„Ç≠" (ki), ale s dvoma bodkami - "GI" ako gitara.' },  
    { character: '„Ç∞', romaji: 'gu', mnemonic: 'Ako "„ÇØ" (ku), ale s dvoma bodkami - "GU" ako guƒæa.' },  
    { character: '„Ç≤', romaji: 'ge', mnemonic: 'Ako "„Ç±" (ke), ale s dvoma bodkami - "GE" ako gener√°tor.' },  
    { character: '„Ç¥', romaji: 'go', mnemonic: 'Ako "„Ç≥" (ko), ale s dvoma bodkami - "GO" ako g√≥l.' },  
    { character: '„Ç∂', romaji: 'za', mnemonic: 'Ako "„Çµ" (sa), ale s dvoma bodkami - "ZA" ako z√°mok.' },  
    { character: '„Ç∏', romaji: 'ji', mnemonic: 'Ako "„Ç∑" (shi), ale s dvoma bodkami - "JI" ako jing a jang.' },  
    { character: '„Ç∫', romaji: 'zu', mnemonic: 'Ako "„Çπ" (su), ale s dvoma bodkami - "ZU" ako zub.' },  
    { character: '„Çº', romaji: 'ze', mnemonic: 'Ako "„Çª" (se), ale s dvoma bodkami - "ZE" ako zebra.' },  
    { character: '„Çæ', romaji: 'zo', mnemonic: 'Ako "„ÇΩ" (so), ale s dvoma bodkami - "ZO" ako zoo.' },  
    { character: '„ÉÄ', romaji: 'da', mnemonic: 'Ako "„Çø" (ta), ale s dvoma bodkami - "DA" ako d√°≈ædnik.' },  
    { character: '„ÉÇ', romaji: 'ji', mnemonic: 'Ako "„ÉÅ" (chi), ale s dvoma bodkami - druh√Ω znak pre "JI" ako jing.' },  
    { character: '„ÉÖ', romaji: 'zu', mnemonic: 'Ako "„ÉÑ" (tsu), ale s dvoma bodkami - druh√Ω znak pre "ZU" ako zubn√° kefka.' },  
    { character: '„Éá', romaji: 'de', mnemonic: 'Ako "„ÉÜ" (te), ale s dvoma bodkami - "DE" ako detekt√≠v.' },  
    { character: '„Éâ', romaji: 'do', mnemonic: 'Ako "„Éà" (to), ale s dvoma bodkami - "DO" ako dom.' },  
    { character: '„Éê', romaji: 'ba', mnemonic: 'Ako "„Éè" (ha), ale s dvoma bodkami - "BA" ako bal√≥n.' },  
    { character: '„Éì', romaji: 'bi', mnemonic: 'Ako "„Éí" (hi), ale s dvoma bodkami - "BI" ako bicykel.' },  
    { character: '„Éñ', romaji: 'bu', mnemonic: 'Ako "„Éï" (fu), ale s dvoma bodkami - "BU" ako bublina.' },  
    { character: '„Éô', romaji: 'be', mnemonic: 'Ako "„Éò" (he), ale s dvoma bodkami - "BE" ako be≈æec.' },  
    { character: '„Éú', romaji: 'bo', mnemonic: 'Ako "„Éõ" (ho), ale s dvoma bodkami - "BO" ako box.' },  
    { character: '„Éë', romaji: 'pa', mnemonic: 'Ako "„Éè" (ha), ale s kr√∫≈ækom - "PA" ako paprika.' },  
    { character: '„Éî', romaji: 'pi', mnemonic: 'Ako "„Éí" (hi), ale s kr√∫≈ækom - "PI" ako pilot.' },  
    { character: '„Éó', romaji: 'pu', mnemonic: 'Ako "„Éï" (fu), ale s kr√∫≈ækom - "PU" ako pusa.' },  
    { character: '„Éö', romaji: 'pe', mnemonic: 'Ako "„Éò" (he), ale s kr√∫≈ækom - "PE" ako pero.' },  
    { character: '„Éù', romaji: 'po', mnemonic: 'Ako "„Éõ" (ho), ale s kr√∫≈ækom - "PO" ako poh√°r.' },  
];   

let allCharacters = [];
let stats = [];
let savedStats = JSON.parse(localStorage.getItem('hiraganaKatakanaStats') || '[]');
let darkMode = false;
let totalQuestions = 0;
let correctAnswers = 0;
let currentChar;
let selectedSets = [];
let excludedCharacters = [];

const bodyElement = document.getElementById('body');
const characterDisplay = document.getElementById('characterDisplay');
const optionsContainer = document.getElementById('options');
const resultDisplay = document.getElementById('result');
const nextButton = document.getElementById('nextButton');
const toggleDarkMode = document.getElementById('toggleDarkMode');
const progressBar = document.getElementById('progressBar');
const progressFill = document.getElementById('progressFill');
const progressText = document.getElementById('progressText');
const knownCharactersDisplay = document.getElementById('knownCharacters');
const settingsSection = document.getElementById('settings');
const learningSection = document.getElementById('learningSection');
const startButton = document.getElementById('startButton');
const hiraganaCheckbox = document.getElementById('hiraganaCheckbox');
const hiraganaDakuonCheckbox = document.getElementById('hiraganaDakuonCheckbox');
const katakanaCheckbox = document.getElementById('katakanaCheckbox');
const katakanaDakuonCheckbox = document.getElementById('katakanaDakuonCheckbox');
const infoButton = document.getElementById('infoButton');
const infoSection = document.getElementById('infoSection');
const backToSettings = document.getElementById('backToSettings');
const backToSettingsFromLearning = document.getElementById('backToSettingsFromLearning');
const charactersDisplay = document.getElementById('charactersDisplay');

function initApp() {
    loadExcludedCharacters();
    selectedSets = [];
    if (hiraganaCheckbox.checked) selectedSets = selectedSets.concat(hiraganaData);
    if (hiraganaDakuonCheckbox.checked) selectedSets = selectedSets.concat(hiraganaDakuonData);
    if (katakanaCheckbox.checked) selectedSets = selectedSets.concat(katakanaData);
    if (katakanaDakuonCheckbox.checked) selectedSets = selectedSets.concat(katakanaDakuonData);
    if (selectedSets.length === 0) {
        alert('Pros√≠m, vyberte aspo≈à jednu sadu znakov.');
        return;
    }
    allCharacters = selectedSets;
    stats = allCharacters.map(item => {
        const savedItem = savedStats.find(s => s.character === item.character);
        return savedItem ? savedItem : { ...item, correct: 0, incorrect: 0 };
    });
    totalQuestions = 0;
    correctAnswers = 0;
    updateProgress();
    updateKnownCharacters();
    settingsSection.classList.add('hidden');
    infoSection.classList.add('hidden');
    learningSection.classList.remove('hidden');
    updateCharactersDisplay();
    updateDisplay();
}

function showInfo() {
    settingsSection.classList.add('hidden');
    infoSection.classList.remove('hidden');
}

function backToSettingsFunction() {
    infoSection.classList.add('hidden');
    settingsSection.classList.remove('hidden');
}

function backToSettingsFromLearningFunction() {
    learningSection.classList.add('hidden');
    settingsSection.classList.remove('hidden');
}

function getWeightedRandomCharacter() {
    const activeStats = stats.filter(item => !excludedCharacters.includes(item.character));
    let totalWeight = 0;
    const weights = activeStats.map(item => {
        const weight = Math.pow(2, item.incorrect + 1) / Math.pow(2, item.correct + 1);
        totalWeight += weight;
        return weight;
    });

    let random = Math.random() * totalWeight;
    for (let i = 0; i < activeStats.length; i++) {
        if (random < weights[i]) {
            return activeStats[i];
        }
        random -= weights[i];
    }
    return activeStats[activeStats.length - 1];
}

function generateOptions(correctRomaji) {
    const options = new Set();
    options.add(correctRomaji);
    while (options.size < 8) {
        const randomRomaji = allCharacters[Math.floor(Math.random() * allCharacters.length)].romaji;
        if (randomRomaji !== correctRomaji) {
            options.add(randomRomaji);
        }
    }
    return Array.from(options);
}

function updateDisplay() {
    resultDisplay.textContent = '';
    resultDisplay.className = '';
    optionsContainer.innerHTML = '';
    currentChar = getWeightedRandomCharacter();
    characterDisplay.textContent = currentChar.character;

    const options = generateOptions(currentChar.romaji);
    const shuffledOptions = shuffleArray(options);

    shuffledOptions.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option;
        button.className = 'bg-gray-200 text-gray-800 px-4 py-2 rounded m-1';
        button.addEventListener('click', () => checkAnswer(button, option));
        optionsContainer.appendChild(button);
    });

    nextButton.disabled = true;
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function checkAnswer(buttonClicked, selectedOption) {
    Array.from(optionsContainer.children).forEach(button => button.disabled = true);

    totalQuestions++;

    if (selectedOption === currentChar.romaji) {
        resultDisplay.textContent = 'Spr√°vne!';
        resultDisplay.className = 'text-center text-green-500 text-xl font-semibold mb-4';
        buttonClicked.classList.add('bg-green-200');
        currentChar.correct++;
        correctAnswers++;
    } else {
        resultDisplay.textContent = `Nespr√°vne. Spr√°vna odpoveƒè je "${currentChar.romaji}".`;
        resultDisplay.className = 'text-center text-red-500 text-xl font-semibold mb-4';
        buttonClicked.classList.add('bg-red-200');
        Array.from(optionsContainer.children).forEach(button => {
            if (button.textContent === currentChar.romaji) {
                button.classList.add('bg-green-200');
            }
        });
        currentChar.incorrect++;

        // Prid√°me zobrazenie mnemotechnickej pom√¥cky
        if (currentChar.mnemonic) {
            const mnemonicDisplay = document.createElement('div');
            mnemonicDisplay.textContent = `Pom√¥cka: ${currentChar.mnemonic}`;
            mnemonicDisplay.className = 'text-center text-gray-600 mt-2 italic';
            resultDisplay.appendChild(mnemonicDisplay);
        }
    }

    const correctAttempts = currentChar.correct;
    const incorrectAttempts = currentChar.incorrect;
    const statsMessage = `Tento znak si urƒçil spr√°vne ${correctAttempts}x a nespr√°vne ${incorrectAttempts}x.`;
    const statsDisplay = document.createElement('div');
    statsDisplay.textContent = statsMessage;
    statsDisplay.className = 'text-center text-gray-700 mt-2';
    resultDisplay.appendChild(statsDisplay);

    savedStats = stats;
    localStorage.setItem('hiraganaKatakanaStats', JSON.stringify(savedStats));

    updateProgress();
    updateKnownCharacters();
    updateCharactersDisplay();

    nextButton.disabled = false;
}

function updateProgress() {
    const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
    progressFill.style.width = `${percentage}%`;
    progressText.textContent = `${percentage}% spr√°vne`;
}

function updateKnownCharacters() {
    const activeCharacters = stats.filter(item => !excludedCharacters.includes(item.character));
    const knownCharacters = activeCharacters.filter(item => (item.correct / (item.correct + item.incorrect)) >= 0.75 && (item.correct + item.incorrect) >= 4);
    const totalActiveCharacters = activeCharacters.length;
    const knownPercentage = totalActiveCharacters > 0 ? Math.round((knownCharacters.length / totalActiveCharacters) * 100) : 0;
    knownCharactersDisplay.textContent = `Pozn√°te ${knownPercentage}% akt√≠vnych znakov.`;
}

function toggleCharacterExclusion(character) {
    const index = excludedCharacters.indexOf(character);
    if (index > -1) {
        excludedCharacters.splice(index, 1);
    } else {
        excludedCharacters.push(character);
    }
    updateCharactersDisplay();
    updateKnownCharacters();
    saveExcludedCharacters();
}

function saveExcludedCharacters() {
    localStorage.setItem('excludedCharacters', JSON.stringify(excludedCharacters));
}

function loadExcludedCharacters() {
    const saved = localStorage.getItem('excludedCharacters');
    if (saved) {
        excludedCharacters = JSON.parse(saved);
    }
}

function updateCharactersDisplay() {
    charactersDisplay.innerHTML = '';

    stats.forEach(item => {
        const charContainer = document.createElement('div');
        charContainer.className = 'character-container';

        const charElement = document.createElement('span');
        charElement.textContent = item.character;
        charElement.className = 'character';

        const numbersContainer = document.createElement('div');
        numbersContainer.className = 'numbers-container';

        const correctIndex = document.createElement('span');
        correctIndex.textContent = item.correct.toString().padStart(2, '0');
        correctIndex.style.color = 'green';

        const incorrectIndex = document.createElement('span');
        incorrectIndex.textContent = item.incorrect.toString().padStart(2, '0');
        incorrectIndex.style.color = 'red';

        numbersContainer.appendChild(correctIndex);
        numbersContainer.appendChild(incorrectIndex);

        charContainer.appendChild(charElement);
        charContainer.appendChild(numbersContainer);

        charContainer.addEventListener('click', () => toggleCharacterExclusion(item.character));

        if (excludedCharacters.includes(item.character)) {
            charContainer.style.opacity = '0.3';
            charElement.style.color = '#888';
        } else {
            const totalAttempts = item.correct + item.incorrect;

            if (totalAttempts === 0) {
                charElement.style.color = 'gray';
            } else {
                const correctness = item.correct - item.incorrect;
                let colorValue = 0;

                if (correctness > 0) {
                    colorValue = Math.min(100 + correctness * 30, 255);
                    charElement.style.color = `rgb(0, ${colorValue}, 0)`;
                } else {
                    colorValue = Math.min(100 + Math.abs(correctness) * 30, 255);
                    charElement.style.color = `rgb(${colorValue}, 0, 0)`;
                }
            }
        }

        charactersDisplay.appendChild(charContainer);
    });
}

function toggleDarkModeFunction() {
    darkMode = !darkMode;
    if (darkMode) {
        bodyElement.classList.add('dark-mode');
    } else {
        bodyElement.classList.remove('dark-mode');
    }
}

startButton.addEventListener('click', initApp);
nextButton.addEventListener('click', updateDisplay);
toggleDarkMode.addEventListener('click', toggleDarkModeFunction);
infoButton.addEventListener('click', showInfo);
backToSettings.addEventListener('click', backToSettingsFunction);
backToSettingsFromLearning.addEventListener('click', backToSettingsFromLearningFunction);

document.addEventListener('keydown', function(event) {
    if (event.code === 'Space' && !nextButton.disabled) {
        updateDisplay();
    }
});
</script>
</body>
</html>
</antArtifact>